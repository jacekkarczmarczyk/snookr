<!doctype html>
<title>Snookr</title>
<meta charset="utf-8"/>
<link rel="stylesheet" type="text/css" href="snookr.css" />
<div style="display: none">
    <img src="resources/cue.png" data-resource="cue" />
    <img src="resources/ball-red.png" data-resource="ball-red"/>
    <img src="resources/ball-white.png" data-resource="ball-white"/>
    <img src="resources/ball-yellow.png" data-resource="ball-yellow"/>
    <img src="resources/ball-green.png" data-resource="ball-green"/>
    <img src="resources/ball-brown.png" data-resource="ball-brown"/>
    <img src="resources/ball-blue.png" data-resource="ball-blue"/>
    <img src="resources/ball-pink.png" data-resource="ball-pink"/>
    <img src="resources/ball-black.png" data-resource="ball-black"/>

    <img src="resources/canvas.jpg" data-resource="canvas"/>

    <audio data-type="applause1" src="audio/applause1.mp3"></audio>
    <audio data-type="applause2" src="audio/applause2.mp3"></audio>
    <audio data-type="disappointment" src="audio/disappointment.mp3"></audio>
    <audio data-type="ball" src="audio/ball.mp3"></audio>
</div>

<script src="vue@2.2.6.js"></script>
<script src="classes/Point.js"></script>
<script src="classes/LineSegment.js"></script>
<script src="classes/LineArc.js"></script>
<script src="classes/Vector.js"></script>
<script src="classes/Spin.js"></script>
<script src="classes/BallMovement.js"></script>
<script src="classes/AudioClip.js"></script>
<script src="classes/ResourcesFactory.js"></script>
<script src="classes/SnookrAudioPlayer.js"></script>
<script src="classes/SnookrTable.js"></script>
<script src="classes/SnookrTableArcade.js"></script>
<script src="classes/SnookrTableRegular.js"></script>
<script src="classes/SnookrTableReal.js"></script>
<script src="classes/SnookrBall.js"></script>
<script src="classes/SnookrBallSet.js"></script>
<script src="classes/SnookrPhysics.js"></script>
<script src="classes/SnookrGameStateManager.js"></script>
<script src="classes/SnookrGame.js"></script>
<script src="classes/SnookrGameArcade.js"></script>
<script src="classes/SnookrGameRegular.js"></script>
<script src="classes/SnookrGameReal.js"></script>
<script src="classes/SnookrGameTest.js"></script>
<script src="classes/SnookrEvent.js"></script>
<script src="classes/SnookrEventListener.js"></script>
<script src="classes/SpinPower.js"></script>
<script src="classes/SnookrShotResult.js"></script>
<script src="classes/SnookrRule.js"></script>
<script src="classes/SnookrRuleExpectingAnyColor.js"></script>
<script src="classes/SnookrRuleExpectingColor.js"></script>
<script src="classes/SnookrRuleExpectingRed.js"></script>
<script src="classes/SnookrRuleFreeBall.js"></script>
<script src="classes/SnookrRuleRepeat.js"></script>
<script src="classes/SnookrHistory.js"></script>
<script src="classes/SnookrHistoryEntry.js"></script>
<script src="classes/SnookrController.js"></script>

<script src="vue/SnookrUiApp.js"></script>
<script src="vue/SnookrUiBoard.js"></script>
<script src="vue/SnookrUiPlayerPanel.js"></script>
<script src="vue/SnookrUiSpinnerBall.js"></script>
<script src="vue/SnookrUiTable.js"></script>

<div id="app">
    <snookr-ui-app v-bind:game-state="gameState"></snookr-ui-app>
</div>

<script type="text/javascript">
    const gameState = {
        players: [{
            name: 'Player 1',
            score: 1,
            framesWon: 2,
            breakValue: 3,
        }, {
            name: 'Player 2',
            score: 0,
            framesWon: 0,
            breakValue: 0,
        }],
        spinPower: new SpinPower(0, 0),
        currentPlayer: Math.floor(Math.random() * 2),
        currentRule: 'red',
        isSnookr: false,
        numberOfFrames: 7,
        currentGameState: SnookrGameStateManager.GAME_STATE_SHOOTING
    };


    // https://github.com/yangmingshan/vue-bus
    //
    function VueBus(Vue) {
        const bus = new Vue();

        Object.defineProperties(bus, {
            on: {
                get: function() { return this.$on; }
            },
            once: {
                get: function() { return this.$once; }
            },
            off: {
                get: function() { return this.$off; }
            },
            emit: {
                get: function() { return this.$emit; }
            }
        });

        Object.defineProperty(Vue.prototype, '$bus', {
            get: function() {
                return bus;
            }
        });
    }
    Vue.use(VueBus);







    const app = new Vue({
        el: '#app',
        data: {gameState}
    });

    window.addEventListener('load', () => (new SnookrController).run(gameState));
</script>
